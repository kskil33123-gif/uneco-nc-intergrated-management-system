# 유네코-엔씨산업 제강슬래그 통합관리 시스템

## 1. 프로젝트 개요

본 프로젝트는 유네코와 엔씨산업 간의 제강슬래그 처리 및 이동 과정을 실시간으로 모니터링하고 관리하기 위한 웹 대시보드 애플리케이션입니다. 복잡한 물류 및 생산 과정을 시각적으로 표현하여 양사 간의 투명성을 높이고, 데이터 기반의 효율적인 의사결정을 지원하는 것을 목표로 합니다.

## 2. 주요 기능

### 🎨 실시간 공정 플로우 차트
- **React Flow** 라이브러리를 활용하여 원료 출고부터 완제품 출고까지의 전체 프로세스를 시각화합니다.
- 각 공정 단계(노드)는 '대기', '진행 중', '완료', '이슈' 상태에 따라 색상과 아이콘이 동적으로 변경됩니다.
- 현재 진행 중인 단계는 펄스 애니메이션과 움직이는 엣지(Edge)로 표시되어 사용자가 직관적으로 프로세스 현황을 파악할 수 있습니다.

### 🚦 대화형 다단계 승인 워크플로우
- **자동 프로세스 일시정지**: '완제품 보관' 단계가 완료되면 실제 발주를 기다리는 상황을 시뮬레이션하기 위해 자동 흐름이 일시정지됩니다.
- **사용자 액션 기반 재개**: '알림 센터'에 표시된 '신규 발주' 알림의 '출고 준비' 버튼을 클릭해야 다음 프로세스가 시작됩니다.
- **단계별 수동 승인**: '입고 확인'이나 '최종 출고 승인'과 같이 수동 확인이 필요한 단계에서는 프로세스가 다시 일시정지되며, 사용자가 노드 상세 모달에서 직접 승인해야만 다음으로 진행됩니다.

### 📊 동적 KPI 대시보드
- 회사의 관점('유네코' 또는 '엔씨산업')에 따라 맞춤형 핵심 성과 지표(KPI)를 카드 형태로 제공합니다.
- KPI 카드는 전일 대비 증감률을 시각적으로 표시하여 성과를 쉽게 추적할 수 있습니다.

### 🔔 인터랙티브 알림 센터
- 승인 대기, 시스템 이슈, 재고 경고 등 중요한 알림을 실시간으로 표시합니다.
- 특정 알림(예: 신규 발주)에는 '출고 준비'와 같은 액션 버튼이 포함되어, 사용자가 알림을 통해 직접 프로세스를 제어할 수 있습니다.

### 🖱️ 인터랙티브 UI
- 플로우 차트의 각 노드를 클릭하면 해당 공정의 상세 정보(담당자, 수량, 위치 등)를 담은 모달 창이 나타납니다.
- 수동 승인이 필요한 노드의 모달에는 동적 텍스트(예: '입고 확인', '최종 출고 승인')를 가진 확인 버튼이 표시됩니다.
- **Framer Motion**을 활용한 부드러운 애니메이션 효과를 적용하여 사용자 경험을 향상시켰습니다.

### 📱 반응형 디자인
- Tailwind CSS를 사용하여 데스크톱, 태블릿, 모바일 등 다양한 디바이스 환경에서 최적화된 화면을 제공합니다.

## 3. 기술 스택

- **프론트엔드**:
  - **React 18**: 컴포넌트 기반 UI 라이브러리
  - **TypeScript**: 타입 안정성을 통한 코드 품질 향상
  - **Tailwind CSS**: 유틸리티 우선의 CSS 프레임워크
  - **React Flow**: 노드 기반 그래프 및 플로우 차트 시각화
  - **Framer Motion**: 선언적 애니메이션 라이브러리

- **개발 환경**:
  - **Vite**: 빠른 속도의 프론트엔드 개발 도구 (로컬 개발 환경)
  - **Import Maps**: 빌드 도구 없이 브라우저에서 직접 ES 모듈을 로드
  - **esm.sh**: ES 모듈을 제공하는 CDN

## 4. 파일 구조

```
.
├── index.html            # 메인 HTML 파일 및 importmap 설정
├── index.tsx             # React 애플리케이션 진입점
├── App.tsx               # 최상위 컴포넌트, 뷰 상태 관리
├── metadata.json         # 애플리케이션 메타 정보
├── types.ts              # 전역 TypeScript 타입 정의
├── constants.tsx         # 상수, 목 데이터, 아이콘 컴포넌트
├── hooks/
│   └── useProcessData.ts # 실시간 데이터 및 워크플로우 시뮬레이션 훅
└── components/
    ├── Dashboard.tsx     # 대시보드 레이아웃
    ├── Header.tsx        # 헤더 및 뷰 전환 버튼
    ├── FlowDiagram.tsx   # React Flow 기반 플로우 차트
    ├── KpiCard.tsx       # KPI 카드 컴포넌트
    ├── AlertCenter.tsx   # 알림 센터 컴포넌트
    └── NodeDetailModal.tsx # 노드 상세 정보 및 승인 모달
```

## 5. 핵심 로직 설명

### 데이터 흐름 및 워크플로우 시뮬레이션 (`hooks/useProcessData.ts`)

- 실제 백엔드 없이 프론트엔드에서 데이터가 실시간으로 변하고, 사용자 상호작용에 따라 프로세스가 진행되는 것처럼 시뮬레이션하기 위해 `useProcessData` 커스텀 훅을 사용합니다.
- `isPaused` 상태를 도입하여 자동 프로세스 흐름을 제어합니다. `setInterval` 내의 `updateProcess` 함수는 `isPaused`가 `false`일 때만 실행됩니다.
- 프로세스는 다음 두 가지 경우에 자동으로 일시정지(`isPaused = true`)됩니다.
  1.  `requiresManualConfirmation: true`로 설정된 노드(예: 입고, 출고)가 '진행 중' 상태가 될 때.
  2.  '완제품 보관' 단계(5번 노드)가 완료되어 신규 발주를 기다려야 할 때.
- UI와 상호작용하기 위해 `confirmStep`과 `startShippingProcess` 함수를 외부에 노출합니다.
  - `confirmStep`: `NodeDetailModal`의 승인 버튼 클릭 시 호출되어 현재 단계를 진행시키고, 일시정지를 해제합니다.
  - `startShippingProcess`: `AlertCenter`의 '출고 준비' 버튼 클릭 시 호출되어 출고 프로세스를 시작하고, 최종 승인을 위해 즉시 다시 일시정지 상태로 전환합니다.
- 이러한 구조를 통해 자동화된 흐름과 사용자 수동 개입이 결합된 현실적인 비동기 워크플로우를 구현합니다.

### 상태 관리 (`App.tsx`)

- `useState`를 사용하여 현재 사용자가 보고 있는 뷰(`uneco` 또는 `nc_industry`)를 `companyView` 상태로 관리합니다.
- 이 상태는 `Header` 컴포넌트로 전달되어 버튼 UI를 업데이트하고, `Dashboard` 컴포넌트로 전달되어 표시할 KPI 데이터를 결정합니다.

### 컴포넌트 아키텍처

- UI를 재사용 가능한 작은 단위의 컴포넌트(예: `KpiCard`, `AlertCenter`)로 분리하여 코드의 유지보수성과 가독성을 높였습니다.
- `FlowDiagram` 컴포넌트 내부에 커스텀 노드(`CustomNode`)를 정의하여 기본 노드 디자인을 비즈니스 요구사항에 맞게 확장했습니다.
- `NodeDetailModal`과 `AlertCenter`는 이제 단순 정보 표시를 넘어, `onConfirm`과 `action` 같은 함수 prop을 통해 상위 상태 관리 훅(`useProcessData`)과 상호작용하여 전체 애플리케이션의 상태를 변경하는 역할을 수행합니다.
